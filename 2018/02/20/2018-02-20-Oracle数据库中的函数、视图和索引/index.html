<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-center-circle.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon32.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon16.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="数据库,Oracle," />





  <link rel="alternate" href="/atom.xml" title="雷凯博的博客" type="application/atom+xml" />






<meta name="description" content="1. Oracle函数Oracle SQL 提供了用于执行特定操作的专用函数。这些函数大大增强了 SQL 语言的功能。函数可以接受零个或者多个输入参数，并返回一个输出结果。 Oracle 数据库中主要使用两种类型的函数：">
<meta name="keywords" content="数据库,Oracle">
<meta property="og:type" content="article">
<meta property="og:title" content="Oracle数据库中的函数、视图和索引">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;2018&#x2F;02&#x2F;20&#x2F;2018-02-20-Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0%E3%80%81%E8%A7%86%E5%9B%BE%E5%92%8C%E7%B4%A2%E5%BC%95&#x2F;index.html">
<meta property="og:site_name" content="雷凯博的博客">
<meta property="og:description" content="1. Oracle函数Oracle SQL 提供了用于执行特定操作的专用函数。这些函数大大增强了 SQL 语言的功能。函数可以接受零个或者多个输入参数，并返回一个输出结果。 Oracle 数据库中主要使用两种类型的函数：">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190107170825907.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xlbzExMjAxNzg1MTg=,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190107170852730.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xlbzExMjAxNzg1MTg=,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190107170921696.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xlbzExMjAxNzg1MTg=,size_16,color_FFFFFF,t_70">
<meta property="og:updated_time" content="2021-05-16T11:04:06.704Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190107170825907.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xlbzExMjAxNzg1MTg=,size_16,color_FFFFFF,t_70">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/02/20/2018-02-20-Oracle数据库中的函数、视图和索引/"/>





  <title>Oracle数据库中的函数、视图和索引 | 雷凯博的博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>


<a href="https://github.com/leikaibo1014" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>


    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">雷凯博的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">记录学习中的点点滴滴</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-resume">
          <a href="/resume" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            个人简历
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" target="_blank" rel="noopener" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/20/2018-02-20-Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0%E3%80%81%E8%A7%86%E5%9B%BE%E5%92%8C%E7%B4%A2%E5%BC%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="雷凯博">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="雷凯博的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Oracle数据库中的函数、视图和索引</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-02-20T14:56:32+08:00">
                2018-02-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Oracle%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index">
                    <span itemprop="name">Oracle数据库</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/02/20/2018-02-20-Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0%E3%80%81%E8%A7%86%E5%9B%BE%E5%92%8C%E7%B4%A2%E5%BC%95/" class="leancloud_visitors" data-flag-title="Oracle数据库中的函数、视图和索引">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">热度&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3.5k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  15 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="1-Oracle函数"><a href="#1-Oracle函数" class="headerlink" title="1. Oracle函数"></a>1. Oracle函数</h1><p>Oracle SQL 提供了用于执行特定操作的专用函数。这些函数大大增强了 SQL 语言的功能。函数可以接受零个或者多个输入参数，并返回一个输出结果。 Oracle 数据库中主要使用两种类型的函数：</p>
<a id="more"></a>

<p><strong>1. 单行函数：</strong><br>对每一个函数应用在表的记录中时，只能输入一行结果，返回一个结果，比如： MOD(x,y)返回 x 除以 y 的余数（ x 和 y 可以是两个整数，也可以是表中的整数列）。常用的单行函数有：对每一个函数应用在表的记录中时，只能输入一行结果，返回一个结果，比如： MOD(x,y)返回 x 除以 y 的余数（ x 和 y 可以是两个整数，也可以是表中的整数列）。<br><strong>常用的单行函数有：</strong><br> 字符函数：对字符串操作。<br> 数字函数：对数字进行计算，返回一个数字。<br> 转换函数：可以将一种数据类型转换为另外一种数据类型。<br> 日期函数：对日期和时间进行处理。</p>
<p><strong>2. 聚合函数：</strong><br>聚合函数同时可以对多行数据进行操作，并返回一个结果。比如 SUM(x)返回结果集中 x 列的总合。聚合函数同时可以对多行数据进行操作，并返回一个结果。比如 SUM(x)返回结果集中 x 列的总合。</p>
<h2 id="字符函数"><a href="#字符函数" class="headerlink" title="字符函数"></a>字符函数</h2><p>字符函数接受字符参数，这些参数可以是表中的列，也可以是一个字符串表达式。下表<br>列出了常用的字符函数。<br><img src="https://img-blog.csdnimg.cn/20190107170825907.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xlbzExMjAxNzg1MTg=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/20190107170852730.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xlbzExMjAxNzg1MTg=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="数字函数"><a href="#数字函数" class="headerlink" title="数字函数"></a>数字函数</h2><p>数字函数接受数字参数，参数可以来自表中的一列，也可以是一个数字表达式。</p>
<p><img src="https://img-blog.csdnimg.cn/20190107170921696.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xlbzExMjAxNzg1MTg=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><strong>说明：</strong></p>
<ol>
<li><p>ROUND(X[,Y])，四舍五入。<br>在缺省 y 时，默认 y=0；比如： ROUND(3.56)=4。<br>y 是正整数，就是四舍五入到小数点后 y 位。 ROUND(5.654,2)=5.65。<br>y 是负整数，四舍五入到小数点左边|y|位。 ROUND(351.654,-2)=400。</p>
</li>
<li><p>TRUNC(x[,y])，直接截取，不四舍五入。<br>在缺省 y 时，默认 y=0；比如： TRUNC (3.56)=3。<br>y 是正整数，就是四舍五入到小数点后 y 位。 TRUNC (5.654,2)=5.65。<br>y 是负整数，四舍五入到小数点左边|y|位。 TRUNC (351.654,-2)=300。</p>
</li>
</ol>
<h2 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h2><p>日期函数对日期进行运算。常用的日期函数有：<br>1.SYSDATE:显示系统当前日期</p>
<pre><code>例：select sysdate from dual</code></pre><ol start="2">
<li><p>ADD_MONTHS(date,n)，在某一个日期 date 上，加上指定的月数 n，返回计算后的新日期。date 表示日期， n 表示要加的月数。</p>
<p>例：select add_months(sysdate, 6) six_month_later from dual;</p>
<ol start="3">
<li>LAST_DAY(date)，返回指定日期当月的最后一天。<br>例：select last_day(sysdate) from dual;</li>
</ol>
</li>
</ol>
<p>4.NEXT_DAY(date,char)：返回date日期的下一个周几，周几是由char决定的。</p>
<pre><code>例：select NEXT_DAY(SYSDATE, ‘星期三’) from dual;</code></pre><p>Char:中文环境中用中文，英文环境中用英文。<br>5.MONTHS_BETWEEN(DATE1,DATE2):计算date1和date2两个日期间的间隔。注意是date1-date2</p>
<pre><code>例：select months_between(sysdate, ’17-1月-17’) from dual;</code></pre><p>例：计算emp表中职员入职多少个月。</p>
<ol start="3">
<li>ROUND(d[,fmt])，返回一个以 fmt 为格式的四舍五入日期值， d 是日期， fmt 是格式<br>模型。默认 fmt 为 DDD，即月中的某一天。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">如果 fmt 为“YEAR”则舍入到某年的 1 月 1 日，即前半年舍去，后半年作为下一年。</span><br><span class="line">如果 fmt 为“MONTH”则舍入到某月的 1 日，即前月舍去，后半月作为下一月。</span><br><span class="line">例：select round(to_date(‘2009-09-25’, ‘yyyy-mm-dd’), ‘MONTH’) round_date from dual;</span><br><span class="line">例：select round(to_date(‘2009-09-25’, ‘yyyy-mm-dd’), ‘YEAR’) round_date from dual;</span><br><span class="line">例：select round(to_date(‘2009-09-25’, ‘yyyy-mm-dd’)) round_date from dual;</span><br></pre></td></tr></table></figure>

<p>与 ROUND 对应的函数是TRUNC(d[,fmt])对日期的操作， TRUNC 与 ROUND 非常相似，只<br>是不对日期进行舍入，直接截取到对应格式的第一天。</p>
<pre><code>例：select TRUNC(to_date(‘2009-09-25’, ‘yyyy-mm-dd’), ‘MONTH’) trunc_date from dual;
例：select TRUNC (to_date(‘2009-09-25’, ‘yyyy-mm-dd’), ‘YEAR’) trunc_date from dual;
例：select TRUNC (to_date(‘2009-09-25’, ‘yyyy-mm-dd’)) trunc_date from dual;</code></pre><ol start="4">
<li>EXTRACT(fmt FROM d)，提取日期中的特定部分。<br>fmt 为： YEAR、MONTH、DAY、HOUR、MINUTE、SECOND。其中 YEAR、MONTH、DAY可以为 DATE 类型匹配，也可以与TIMESTAMP 类型匹配；但HOUR、MINUTE、SECOND 必须与 TIMESTAMP 类型匹配。<br>例：EXTRACT 函数示例</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Select sysdate “date”,</span><br><span class="line">Extract(year from sysdate) “year”</span><br><span class="line">Extract(month from sysdate) “month”</span><br><span class="line">Extract(day from sysdate) “day”</span><br><span class="line">Extract(hour from systimestamp) “hour”</span><br><span class="line">Extract(minute from systimestamp) “minute”</span><br><span class="line">Extract(second from systimestamp) “second”</span><br><span class="line">From dual;</span><br></pre></td></tr></table></figure>

<h2 id="转换函数"><a href="#转换函数" class="headerlink" title="转换函数"></a>转换函数</h2><p>转换函数将值从一种数据类型转换为另外一种数据类型。常用的转换函数有：</p>
<ol>
<li><p>TO_CHAR(d|n[,fmt])<br>把日期和数字转换为制定格式的字符串。 fmt 是格式化字符串，日期的格式化字符串前<br>面已经学习过。<br>代码演示：TO_CHAR 对日期的处理<br>SQL&gt; SELECT TO_CHAR(SYSDATE,’YYYY”年”MM”月”DD”日” HH24:MI:SS’) “date” FROM DUAL;</p>
</li>
<li><p>TO_DATE(x [,fmt])<br>将一个格式字符串转换成日期</p>
</li>
<li><p>NVL(x,value)<br>如果 x 为空，返回 value，否则返回 x。<br>案例 7：对工资是 2000 元以下的员工，如果没有发奖金，每人奖金 100 元。</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">代码演示：NVL 函数</span><br><span class="line">SQL&gt; SELECT ENAME,JOB,SAL,NVL(COMM,100) FROM EMP WHERE SAL&lt;2000;</span><br><span class="line">ENAME JOB SAL NVL(COMM,100)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>NVL2(x,value1,value2)<br>如果 x 非空，返回 value1，否则返回 value2。<br>案例 8：对 EMP 表中工资为 2000 元以下的员工，如果没有奖金，则奖金为 200 元，如<br>果有奖金，则在原来的奖金基础上加 100 元。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">代码演示：NVL2 函数</span><br><span class="line">SQL&gt; SELECT ENAME,JOB,SAL,NVL2(COMM,comm+100,200) &quot;comm&quot;</span><br><span class="line">2 FROM EMP WHERE SAL&lt;2000;</span><br></pre></td></tr></table></figure>


<ol start="3">
<li>COALESCE(expr1[,expr2[,expr3]]…)<br>返回参数列表中第一个非空的表达式的结果。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">例：select ename,sal,comm,COALESCE(sal+comm,sal)salary FROM emp WHERE deptno=30;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>LNNVL(condition)：通常用在where子句中，返回那些不满足condition条件或者判断条件为NULL的记录。所有LNNVL也可以认为是is null 或is not true。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">例：获取奖金数小于500的员工的信息</span><br><span class="line">Select ename,comm from emp where lnnvl(comm&gt;=500);</span><br></pre></td></tr></table></figure>


<p><strong>1.DECODE(expr, search1,result[, search2, result2…][, default])</strong><br>DECODE用于比较参数expr的值，如果匹配到哪一个search条件，就返回对应的result结果。可以有多组search和result的对应关系，如果任何一个search条件都没有匹配到，返回最后default的值。Default参数是可选的，如果没有提供default参数值，当没有匹配到时，返回NULL。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">例：查询职员表，根据职员的职位计算奖金，当职位分别是MANAGER,ANALYST,SALESMAN时，奖励金额分别是薪水的1.2倍，1.1倍，1.05倍。如果不是这三个职位，则奖励金额为领取薪水值</span><br><span class="line">Select ename,job,sal, decode(job,’MANAGR’,sal*1.2, ‘ANALYST’,sal*1.1,’SALESMAN’,</span><br><span class="line">sal*1.05,sal)bonus from emp;</span><br></pre></td></tr></table></figure>




<h2 id="总结：函数可以嵌套使用"><a href="#总结：函数可以嵌套使用" class="headerlink" title="总结：函数可以嵌套使用"></a>总结：函数可以嵌套使用</h2><p>–==========字符函数：处理字符串========</p>
<h3 id="第一组"><a href="#第一组" class="headerlink" title="第一组"></a>第一组</h3><p>–ascii chr</p>
<pre><code>select ascii(&apos;a&apos;) from dual;
select char(97) from dual;</code></pre><p>–lower upperinitcap<br>–求大写A 的ascii</p>
<pre><code>select ascii (upper(&apos;a&apos;)) from dual;</code></pre><p>–求小写a的ascii</p>
<pre><code>select ascii (lower(&apos;A&apos;)) from dual;</code></pre><p>–Initcap</p>
<p>select initcap(ename) from emp;</p>
<h3 id="第二组"><a href="#第二组" class="headerlink" title="第二组"></a>第二组</h3><p>–ltrim rtrim trim<br>–注意事项  Ltrimrtrim  是字符级别的截取，在截取的时候，按照字符去匹配</p>
<pre><code>select  Ltrim(&apos;ellen&apos;,&apos;e&apos;) from dual;
select rtrim(&apos;ellenellneen&apos;,&apos;ne&apos;) from dual;
select trim(&apos;ne&apos;,from &apos;ellenellneen&apos;) from dual;</code></pre><p>–会报错，，trim的截取集只能是一个字符</p>
<pre><code>select trim(&apos;   ellen&apos;) from dual;
--去空格--</code></pre><h3 id="第三组"><a href="#第三组" class="headerlink" title="第三组"></a>第三组</h3><p>–Lpad  rpad  字符串补位函数</p>
<p>左补齐</p>
<pre><code>select lpad(&apos;hao&apos;,2,&apos;ni&apos;) from dual;
select lpad(&apos;hao&apos;,5,&apos;ni&apos;) from dual;
select lpad(&apos;hao&apos;,10,&apos;ni&apos;) from dual;</code></pre><p>右补齐</p>
<pre><code>select rpad (&apos;ni&apos;,1,&apos;hao&apos;) from dual;
select rpad (&apos;ni&apos;,5,&apos;hao&apos;) from dual;
select rpad (&apos;ni&apos;,10,&apos;hao&apos;) from dual;</code></pre><h3 id="其他组"><a href="#其他组" class="headerlink" title="其他组"></a>其他组</h3><p>–concat<br>–字符串连接：和连接运算符作用一致</p>
<pre><code>select concat (&apos;Dear&apos;,ename) from emp;</code></pre><p>–legth：查询emp员工表中员工姓名为5个字符的员工信息</p>
<pre><code>select *from emp where length(ename)=5;</code></pre><p>–substr:求子串</p>
<pre><code>select substr(&apos;Hello word&apos;,3) from dual;
select substr(&apos;Hello word&apos;,3,5) from dual;</code></pre><p>–replace:字符串替换</p>
<pre><code>select replace(&apos;shelly&apos;,&apos;el&apos;,&apos;en&apos;) from dual;</code></pre><p>可以分组去记</p>
<p>–===============数学函数===================</p>
<p>–sign :求符号</p>
<pre><code>select sign(-5) from dual;</code></pre><p>–ceil:  求上整</p>
<pre><code>select ceil(5.6) from dual;</code></pre><p>–floor  求下整</p>
<pre><code>select floor(5.6) from dual;</code></pre><p>–round   四舍五入</p>
<pre><code>select round(3.14) from dual
select round(3.14,1) from dual
select round(3.1415926,4) from dual
select round(356,-2) from dual   --一般是不用的</code></pre><p>–trunc：截断</p>
<pre><code>select trunc(3.1415926,4) from dual;
select trunc(356,-2) from dual</code></pre><p>–=============日期函数======================</p>
<pre><code>--sysdatesystimestamp（比sysdate）更精确

select sysdate from dual;

--add_months(date,1)1表示月份

select add_months(sysdate,1) from dual;

--month_between(date,date)

select months_between(sysdate,hiredate) from emp;
select month_between(sysdate,add_months(sysdate,1)) from dual;</code></pre><p>​<br>    –last_day(date)<br>    select last_day(sysdate) from dual;<br>    select last_day(‘08-2月-2018’)from dual;</p>
<pre><code>--next_day(date,char)
select next_day(sysdate,&apos;星期二&apos;) from dual;</code></pre><p>–round   四舍五入–trunc：截断也可以对日期进行操作</p>
<pre><code>select trunc(sysdate,&apos;MONTH&apos;) from dual;
select round(sysdate,&apos;MONTH&apos;) from dual;

select round(date&apos;2018-01-16&apos;,&apos;MONTH&apos;) from dual;</code></pre><p>—extract:</p>
<pre><code>select extract(year from sysdate) as 年,
extract(month from sysdate) as 月,
extract (day from sysdate) as 日,
extract (hour from systimestamp) as 时,
extract (minute from systimestamp) as 分,
extract(second from systimestamp) as 秒
from dual;</code></pre><p>–===========转换函数================</p>
<p>to_char   to_date<br>–nvl   nvl2<br>–问题：对emp表中的员工奖金为空，那么给200元奖金，如果奖金不为空，那么在原有奖金基础上加100</p>
<pre><code>update emp set comm=nvl2(comm,comm+100,200);</code></pre><p>–问题：查询emp表中所有员工的月收入</p>
<pre><code>select ename，sal+nvl(comm,0) as 月收入 from emp;
select ename,coalesec(sal+comm,sal) as 月收入 from emp;</code></pre><p>–decode<br>–案例：按照职位提升工资，如果是MANAGER，工资是原来的1.5倍，如果是ANALYST工资是原来的1.2倍<br>–如果是SALERSMAN工资是原来的1.1倍，默认情况下，工资是原来的1.05倍</p>
<pre><code>update emp01 set sal=decode(job,&apos;MANAGER&apos;,sal*1.5,&apos;ANALYST&apos;,sal*1.2
,&apos;SALERMAN&apos;，sal*1.1,sal*1.05)</code></pre><h1 id="2-数据库中的视图"><a href="#2-数据库中的视图" class="headerlink" title="2. 数据库中的视图"></a>2. 数据库中的视图</h1><h2 id="（1）什么是视图？"><a href="#（1）什么是视图？" class="headerlink" title="（1）什么是视图？"></a>（1）什么是视图？</h2><p>视图是一张虚表，就是对select查询的结果给取了一个名字。select查询的表称为基表<br>视图不会存储数据，数据存储在基表中，视图只是保存一个映射关系</p>
<pre><code>create view test as select ename,sal,job from emp;</code></pre><h2 id="（2）视图的作用"><a href="#（2）视图的作用" class="headerlink" title="（2）视图的作用"></a>（2）视图的作用</h2><pre><code>1.简化复杂查询
2.限制数据访问</code></pre><p> –简化复杂查询<br>–举例：查询每个部门的员工人数和部门名称</p>
<pre><code>select d.dname,count(*)
from dept d,emp e
where d.deptno=e.deptno
group by d.dname;</code></pre><p>可以创建视图存储上述结果</p>
<pre><code>create view numEmp as
select d.dname,count(*) co
from dept d,emp e
where d.deptno=e.deptno
group by d.dname;


问题：查询人数大于3的部门的名称和员工信息
select *from numEmp where co&gt;3;</code></pre><p><strong>–创建视图的时候，如果遇到select语句中有聚合函数，需要给聚合函数别名</strong></p>
<pre><code>   --限制数据访问举例
  create user hope identified by 123456;
  grant connect to hope;
  grant select on scott.emp to hope; --现在是可以看见整张表

create view empSimple as
select empno,ename,job,mgr,hiredate,deptno
from emp;</code></pre><p>–注意事项：<br>（1）对于视图的查询和表的查询是一样的<br> （2）视图中不包含数据，视图只是一个映射关系<br>（3）当基表发生改变时，视图也会随之改变</p>
<h3 id="（3）怎么创建和删除视图"><a href="#（3）怎么创建和删除视图" class="headerlink" title="（3）怎么创建和删除视图"></a>（3）怎么创建和删除视图</h3><p>语法：</p>
<pre><code>create view 视图名(可以起别名) as
select...from ...【with read only】
--with  read only 表示视图是一个只读视图，只能查询，不能修改</code></pre><p><strong>–分类：简单视图（创建视图的时候可以指定一个别名）</strong></p>
<pre><code>create view v_emp(“工号”,“姓名“) as
select empno,ename from emp;</code></pre><p> ‘</p>
<pre><code>create or replace view v_emp(&quot;编号&quot;,&quot;姓名‘) as
select empno,ename from emp with read only;</code></pre><p>注意事项：别名，要么没有引号，要是有引号就必须是双引号 “ “**</p>
<p>question：能不能对视图进行DML操作insert update delete？<br>    能，但是不是所用的视图都能进行DML操作<br>    牵扯到视图的分类<br>（1）非只读的简单视图可以进行DML操作，事实上是对基表的操作</p>
<pre><code>create or replace view test
   as select empno,ename from emp;

       insert into test values(1010,&apos;sheely&apos;)可以看到基表里面多了一条记录          
       是不是所有的简单视图都可以进行DML操作呢？不是的          
        create or replace view test
       as select ename,sal from emp;        
       insert into test values(&apos;haloo&apos;,5000)执行不了，不允许插入
       原因是：违反了基表的主键约束

       结论：针对视图的DML操作，不能违反基表的约束，所以并不是所有的简单的都可以</code></pre><p>（2）带有with read only  和复杂视图　　连接视图不能进行ＤＭＬ操作</p>
<p>-修改视图 replace： 没有就创建，有的话就修改</p>
<h3 id="视图的分类"><a href="#视图的分类" class="headerlink" title="视图的分类"></a>视图的分类</h3><p>简单视图：简单查询语句（不涉及到连接和聚合函数）</p>
<p>复杂视图：牵扯到聚合函数，但是不涉及到表连接</p>
<p>连接视图：涉及到表连接的视图</p>
<p>–连接视图举例：</p>
<pre><code>CREATE view  emp_dept as
select e.*,d.*
where e.deptno=d.deptno;</code></pre><h2 id="（4）什么是索引？"><a href="#（4）什么是索引？" class="headerlink" title="（4）什么是索引？"></a>（4）什么是索引？</h2><p>类比图书的目录：索引是一种加快数据访问速度的机制<br>索引需要占用磁盘空间的，维护索引需要资源开销，所以索引并不是越多越好</p>
<p>索引的分类：<br>（1）单列索引<br>（2）复合索引</p>
<p>–单列索引</p>
<pre><code>create index idx_ename on emp(ename)
语法：create index 索引名on 表名(字段名1，字段名2)</code></pre><p>–复合索引</p>
<pre><code>create index idx_ename_deptno on emp(ename,deptno);</code></pre><p>–唯一索引</p>
<pre><code>create unique index idx_ename on emp(ename);
--注意;在某一字段上创建一个唯一索引，自动会在该字段创建一个唯一约束
--删除：drop index 索引名
drop  index idx_ename;</code></pre><p>’</p>
<pre><code>--重建  alter index idx_ename rebuild;</code></pre><p><strong>注意事项：如果定义了主键约束和唯一约束，那么Oracle会再自动的创建一个唯一索引</strong></p>
<p>+++++++原创博文，转载请注明出处。+++++++++</p>

      
    </div>
    
    
    	

    <div>
		  
			
<div class="my_post_copyright">
  <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>
  
  <!-- JS库 sweetalert 可修改路径 -->
  <script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <p><span>本文标题:</span><a href="/2018/02/20/2018-02-20-Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0%E3%80%81%E8%A7%86%E5%9B%BE%E5%92%8C%E7%B4%A2%E5%BC%95/">Oracle数据库中的函数、视图和索引</a></p>
  <p><span>文章作者:</span><a href="/" title="访问 雷凯博 的个人博客">雷凯博</a></p>
  <p><span>发布时间:</span>2018年02月20日 - 14:02</p>
  <p><span>最后更新:</span>2021年05月16日 - 19:05</p>
  <p><span>原始链接:</span><a href="/2018/02/20/2018-02-20-Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0%E3%80%81%E8%A7%86%E5%9B%BE%E5%92%8C%E7%B4%A2%E5%BC%95/" title="Oracle数据库中的函数、视图和索引">http://yoursite.com/2018/02/20/2018-02-20-Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0%E3%80%81%E8%A7%86%E5%9B%BE%E5%92%8C%E7%B4%A2%E5%BC%95/</a>
    <span class="copy-path"  title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="http://yoursite.com/2018/02/20/2018-02-20-Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0%E3%80%81%E8%A7%86%E5%9B%BE%E5%92%8C%E7%B4%A2%E5%BC%95/"  aria-label="复制成功！"></i></span>
  </p>
  <p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p>  
</div>
<script> 
    var clipboard = new Clipboard('.fa-clipboard');
      $(".fa-clipboard").click(function(){
      clipboard.on('success', function(){
        swal({   
          title: "",   
          text: '复制成功',
          icon: "success", 
          showConfirmButton: true
          });
        });
    });  
</script>

		  
	</div>
	
	

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>坚持原创技术分享，您的支持将鼓励我继续创作！</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.png" alt="雷凯博 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="雷凯博 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

	<div>
	  
		<div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>

	  
	</div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag"><i class="fa fa-tag"></i> 数据库</a>
          
            <a href="/tags/Oracle/" rel="tag"><i class="fa fa-tag"></i> Oracle</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/02/19/2018-02-10-Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C--%E6%B7%BB%E5%8A%A0%E4%BF%AE%E6%94%B9%E7%BA%A6%E6%9D%9F%E4%BB%A5%E5%8F%8A%E8%A1%A8%E7%BB%93%E6%9E%84%E7%9A%84%E4%BF%AE%E6%94%B9&%E5%BA%8F%E5%88%97/" rel="next" title="Oracle数据库的基本操作添加/修改约束以及表结构的修改序列">
                <i class="fa fa-chevron-left"></i> Oracle数据库的基本操作添加/修改约束以及表结构的修改序列
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/03/12/2018-03-12-Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E4%BE%8B%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%81%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E7%9A%84%E5%8C%BA%E5%88%AB/" rel="prev" title="Oracle数据库实例和数据库、系统用户的区别">
                Oracle数据库实例和数据库、系统用户的区别 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC80NzQzOS8yMzkzOQ=="></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/logo.jpg"
                alt="雷凯博" />
            
              <p class="site-author-name" itemprop="name">雷凯博</p>
              <p class="site-description motion-element" itemprop="description">你现在所经历的挫折和失败，它只属于现在，把它交给时间，一切都是最好的安排</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">49</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">33</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/leikaibo1014" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:kaibo_lei@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                推荐阅读
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://blog.csdn.net/Leo1120178518" title="CSDN" target="_blank">CSDN</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.jianshu.com/p/67b731c3f840" title="主题配置" target="_blank">主题配置</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-Oracle函数"><span class="nav-text">1. Oracle函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#字符函数"><span class="nav-text">字符函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数字函数"><span class="nav-text">数字函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#日期函数"><span class="nav-text">日期函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#转换函数"><span class="nav-text">转换函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#总结：函数可以嵌套使用"><span class="nav-text">总结：函数可以嵌套使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#第一组"><span class="nav-text">第一组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第二组"><span class="nav-text">第二组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第三组"><span class="nav-text">第三组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其他组"><span class="nav-text">其他组</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-数据库中的视图"><span class="nav-text">2. 数据库中的视图</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#（1）什么是视图？"><span class="nav-text">（1）什么是视图？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#（2）视图的作用"><span class="nav-text">（2）视图的作用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#（3）怎么创建和删除视图"><span class="nav-text">（3）怎么创建和删除视图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#视图的分类"><span class="nav-text">视图的分类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#（4）什么是索引？"><span class="nav-text">（4）什么是索引？</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 &mdash; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">雷凯博</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">140.6k</span>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://github.com/leikaibo1014">leikaibo</a> 运行驱动</div>









<!-- 新增访客统计代码 -->


    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
 
    <span id="busuanzi_container_site_pv">总访问量<span id="busuanzi_value_site_pv"></span>次</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">总访客<span id="busuanzi_value_site_uv"></span>人</span>
    <span class="post-meta-divider"></span>
 





        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  









  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three-waves.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("", "");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

  
  
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
